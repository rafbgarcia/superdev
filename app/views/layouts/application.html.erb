<!DOCTYPE html>
<html>
<head profile="http://gmpg.org/xfn/11">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <link rel="shortcut icon" type="image/png" href="<%= image_path 'favicon.png' %>" />

  <%= render 'layouts/seo_meta_tags' %>

  <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:200,300,400,600' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Oswald:300,400' rel='stylesheet' type='text/css'>

  <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  <%= csrf_meta_tags %>

  <!-- Facebook Pixel Code -->
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '269782243444073', {
    em: '<%= user_signed_in? && current_user.email %>'
  });
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=269782243444073&ev=PageView&noscript=1"
  /></noscript>
  <!-- DO NOT MODIFY -->
  <!-- End Facebook Pixel Code -->
  <%= javascript_include_tag 'include_tags/smartlook' if should_track? %>
</head>

<body>
  <%= javascript_include_tag 'include_tags/superdev_fb_app' %>

  <header>
    <div class="container-fluid">
      <div class="row">
        <div class="col-8 hidden-md-up">
          <%= link_to root_path, class: 'ml-2' do %>
            <%= image_tag 'logo.png', width: '165' %>
          <% end %>
        </div>
        <div class="col-4 offset-4 hidden-sm-down text-center">
          <%= link_to root_path, class: 'ml-2' do %>
            <%= image_tag 'logo.png', width: '165' %>
          <% end %>
        </div>
        <div class="col-4 d-flex align-items-center justify-content-end flex-wrap">
          <% if user_signed_in? %>
            <div>
              Olá, <%= link_to current_user.first_name, dashboard_users_path %></div>
              <span class="m-1">|</span>
              <%= link_to 'Sair', destroy_user_session_path, method: :delete %>
            </div>
          <% else %>
            <%= link_to 'Inscreva-se', subscribe_step_1_path, class: 'btn btn-primary' %>
            <%= link_to 'Faça Login', new_user_session_path, class: 'ml-2 p-2' %>
          <% end %>
        </div>
      </div>
    </div>
    <nav class="sub-header">
      <%= link_to 'Cursos', root_path, class: 'btn-info p-3 d-ib ' %>
      <%= active_link_to '#DevQuestions', blog_posts_path, class: 'secondary p-3 d-ib ' %>
      <%= active_link_to 'Sobre', about_path, class: 'secondary p-3 d-ib ' %>
      <%= active_link_to 'Contato', contact_path, class: 'secondary p-3 d-ib' %>
    </nav>
  </header>

  <main>
    <div class="container-fluid">
      <%= yield  %>
    </div>
  </main>

  <footer>
    <div class="container-fluid">
      <p class="text-center">
        <small>Copyright @ 2015-2017 SuperDev</small>
      </p>

      <div class="text-center">
        <%= link_to 'DevQuestions', blog_posts_path %>
        <span class="divider">.</span>
        <%= link_to 'Contato', contact_path %>
        <span class="divider">.</span>
        <%= link_to 'Sobre o SuperDev', about_path %>
        <span class="divider">.</span>
        <a href="https://www.facebook.com/superdev.academy" target="_superdev_facebook">Facebook</a>
      </div>
    </div>
  </footer>

  <% if should_track? %>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-90535712-2', 'auto');

      document.addEventListener('turbolinks:load', function (event) {
        if (typeof ga === 'function') {
          <% if user_signed_in? %>
            ga('set', 'userId', '<%= current_user.email %>');
          <% end %>
          ga('set', 'location', event.data.url)
          ga('send', 'pageview')
        }
      })
    </script>
  <% end %>
</body>
</html>
